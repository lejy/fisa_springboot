<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>μ±… κ΄€λ¦¬</title>
    <!-- Bootstrap 5 CSS λ΅λ“ -->
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css}" rel="stylesheet"/>
</head>
<body class="bg-light">
<div class="container mt-5">

    <!-- μ •μ  μ΄λ―Έμ§€ ν‘μ‹ -->
    <div class="text-center mb-4">
        <img src="/jjanggu.png" alt="Jjangu μ΄λ―Έμ§€" class="img-fluid" style="max-height: 150px;">
    </div>

    <!-- μ±… μ¶”κ°€ νΌ -->
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">π“ μ±… μ¶”κ°€</div>
        <div class="card-body">
            <!-- th:action β†’ μ„λ²„ μΈ΅ μ»¨νΈλ΅¤λ¬ URLκ³Ό λ§¤ν•‘ -->
            <form th:action="@{/books}" method="post">
                <div class="mb-3">
                    <label for="title" class="form-label">μ λ©</label>
                    <input type="text" id="title" name="title" class="form-control" required/>
                </div>
                <div class="mb-3">
                    <label for="author" class="form-label">μ €μ</label>
                    <input type="text" id="author" name="author" class="form-control" required/>
                </div>
                <div class="mb-3">
                    <label for="page" class="form-label">νμ΄μ§€ μ</label>
                    <input type="number" id="page" name="page" class="form-control" required/>
                </div>
                <button type="submit" class="btn btn-success">μ¶”κ°€</button>
            </form>
        </div>
    </div>

    <!-- μ±… λ©λ΅ -->
    <div class="card mb-4">
        <div class="card-header bg-secondary text-white">π“ μ±… λ©λ΅</div>
        <div class="card-body">
            <table class="table table-bordered table-hover text-center">
                <thead class="table-dark">
                <tr>
                    <th>μ λ©</th>
                    <th>μ €μ</th>
                    <th>νμ΄μ§€ μ</th>
                    <th>μμ •</th>
                    <th>μ‚­μ </th>
                </tr>
                </thead>
                <tbody>
                <!-- th:each β†’ λ¦¬μ¤νΈ λ°λ³µ (book κ°μ²΄λ“¤μ„ μμ°¨μ μΌλ΅ λ°λ³µ λ λ”λ§) -->
                <tr th:each="book : ${books}">
                    <!-- th:text β†’ λ³€μ κ°’ μ¶λ ¥ (title μ†μ„± μ¶λ ¥) -->
                    <td th:text="${book.title}">μ λ©</td>
                    <td th:text="${book.author}">μ €μ</td>
                    <td th:text="${book.page}">νμ΄μ§€ μ</td>
                    <td>
                        <!-- μμ • νΌ -->
                        <!-- th:actionμ— κ²½λ΅ λ³€μ μ „λ‹¬ (id λ™μ  λ°”μΈλ”©) -->
                        <form th:action="@{/books/{id}/update(id=${book.id})}" method="post">
                            <input type="hidden" name="_method" value="put"/> <!-- RESTful λ°©μ‹ λ€μ‘ -->
                            <!-- th:value β†’ μ…λ ¥ ν•„λ“μ— κ°’ μ„Έν… -->
                            <input type="text" name="title" class="form-control mb-1" th:value="${book.title}" required/>
                            <input type="text" name="author" class="form-control mb-1" th:value="${book.author}" required/>
                            <input type="number" name="page" class="form-control mb-1" th:value="${book.page}" required/>
                            <button type="submit" class="btn btn-primary btn-sm w-100">μμ •</button>
                        </form>
                    </td>
                    <td>
                        <!-- μ‚­μ  νΌ -->
                        <!-- th:actionμ— λ™μ  ID κ²½λ΅ μ „λ‹¬ -->
                        <form th:action="@{/books/{id}/delete(id=${book.id})}" method="post">
                            <input type="hidden" name="_method" value="delete"/>
                            <button type="submit" class="btn btn-danger btn-sm">μ‚­μ </button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- μ±… μ΅°ν νΌ -->
    <div class="card mb-4">
        <div class="card-header bg-info text-white">π” μ±… μ΅°ν</div>
        <div class="card-body">
            <!-- μ΅°ν νΌ (GET λ°©μ‹) -->
            <form th:action="@{/books/select4}" method="get">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="title" class="form-label">μ λ©</label>
                        <input type="text" id="title" name="title" class="form-control"/>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="author" class="form-label">μ €μ</label>
                        <input type="text" id="author" name="author" class="form-control"/>
                    </div>
                </div>
                <button type="submit" class="btn btn-outline-primary">μ΅°ν</button>
                <a href="/books" class="btn btn-outline-secondary ms-2">λ©λ΅ μƒλ΅κ³ μΉ¨</a>
            </form>
        </div>
    </div>

    <!-- ν‘Έν„° -->
    <footer class="text-center mt-5">
        <p class="text-muted">&copy; 2025 Book Management System</p>
    </footer>
</div>

<!-- Bootstrap 5 JS λ΅λ“ -->
<script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
